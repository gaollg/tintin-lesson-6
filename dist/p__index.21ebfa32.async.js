"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{11669:function(K,L,y){y.r(L),y.d(L,{default:function(){return z}});var H=y(54306),F=y.n(H),W=y(25359),o=y.n(W),P=y(49811),T=y.n(P),Z=y(71402),O=y.n(Z),G=JSON.parse('{"Mt":[{"inputs":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_symbol","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"burnRatio","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"feeAccount","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"txFeeRatio","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"burnAmount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferWithTax","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_feeAccount","type":"address"},{"internalType":"uint256","name":"_txFeeRatio","type":"uint256"},{"internalType":"uint256","name":"_burnRatio","type":"uint256"}],"name":"setProjectAddress","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),A="0x86Dd4C46766228BA10c6d98AB3649E9772e07D35",d,R=function(c,r,u,m){return new Promise(function(){var h=T()(o()().mark(function g(n,p){var f,t,l,a,i,C,w;return o()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return f=S.getContractLesson6ERC20(),t=f.methods[c](u,d.utils.toWei(m)).encodeABI(),v.next=4,d.eth.estimateGas({to:A,data:t,from:r,value:0});case 4:return l=v.sent,v.next=7,d.eth.getChainId();case 7:return a=v.sent,v.next=10,d.eth.getGasPrice();case 10:return i=v.sent,v.next=13,d.eth.getTransactionCount(r);case 13:C=v.sent,w={from:r,to:A,nonce:C,gasPrice:i,gas:l*2,value:"0x0",data:t,chainId:a},d.eth.sendTransaction(w).on("transactionHash",function(s){console.log("txHash:",s),n(s)});case 16:case"end":return v.stop()}},g)}));return function(g,n){return h.apply(this,arguments)}}())},S={instance:function(){if(d)return d;if(!window.ethereum)throw"\u672A\u5B89\u88C5\u94B1\u5305, \u8BF7\u5B89\u88C5\u94B1\u5305\u540E\u91CD\u8BD5";return d=new(O())(window.ethereum),d},getContractLesson6ERC20:function(){var c=S.instance().eth.Contract,r=new c(G.Mt,A);return r},transfer:function(c,r,u){return new Promise(function(){var m=T()(o()().mark(function h(g,n){var p,f,t,l,a,i,C;return o()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return p=S.getContractLesson6ERC20(),f=p.methods.transfer(r,d.utils.toWei(u)).encodeABI(),x.next=4,d.eth.estimateGas({to:A,data:f,from:c,value:0});case 4:return t=x.sent,x.next=7,d.eth.getChainId();case 7:return l=x.sent,x.next=10,d.eth.getGasPrice();case 10:return a=x.sent,x.next=13,d.eth.getTransactionCount(c);case 13:i=x.sent,C={from:c,to:A,nonce:i,gasPrice:a,gas:t*2,value:"0x0",data:f,chainId:l},d.eth.sendTransaction(C).on("transactionHash",function(v){console.log("txHash:",v),alert("txHash:"+v),g(v)});case 16:case"end":return x.stop()}},h)}));return function(h,g){return m.apply(this,arguments)}}())},mint:function(){var b=T()(o()().mark(function r(u){var m,h;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.eth.getAccounts();case 2:return m=n.sent,n.next=5,R("mint",m[0],m[0],u);case 5:return h=n.sent,n.abrupt("return",h);case 7:case"end":return n.stop()}},r)}));function c(r){return b.apply(this,arguments)}return c}(),burn:function(){var b=T()(o()().mark(function r(u){var m,h;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.eth.getAccounts();case 2:return m=n.sent,n.next=5,R("burn",m[0],m[0],u);case 5:return h=n.sent,n.abrupt("return",h);case 7:case"end":return n.stop()}},r)}));function c(r){return b.apply(this,arguments)}return c}()},j=S,N=y(90263),D=y(75773),E=y(93236),e=y(62086),B=j.instance();function $(b,c){var r=(0,E.useState)([]),u=F()(r,2),m=u[0],h=u[1],g=(0,E.useState)(),n=F()(g,2),p=n[0],f=n[1],t=function(){var l=T()(o()().mark(function a(){var i,C,w,x;return o()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,B.eth.getAccounts();case 2:return i=s.sent,h(i),s.next=6,B.eth.getBlockNumber();case 6:return C=s.sent,s.next=9,B.eth.getBlock(C);case 9:return w=s.sent,s.next=12,B.eth.getChainId();case 12:return s.t0=s.sent,s.t1=C,s.t2=w.timestamp,s.next=17,B.eth.getBalance(i[0]);case 17:s.t3=s.sent,x={chainId:s.t0,blockNumber:s.t1,blockTimestamp:s.t2,balance:s.t3},f(x),b.onLogin&&b.onLogin();case 21:case"end":return s.stop()}},a)}));return function(){return l.apply(this,arguments)}}();return(0,E.useEffect)(function(){B.eth.getAccounts().then(function(l){t()})},[]),p?(0,e.jsx)(N.Z,{title:"\u767B\u5F55\u8D26\u53F7\uFF1A"+m[0],children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"flex flex-row  mt-2",children:[(0,e.jsx)("div",{className:"flex-1",children:"chainId"}),(0,e.jsx)("div",{className:"flex-1 text-gray-400",children:p==null?void 0:p.chainId})]}),(0,e.jsxs)("div",{className:"flex flex-row  mt-2",children:[(0,e.jsx)("div",{className:"flex-1",children:"BlockNumber"}),(0,e.jsx)("div",{className:"flex-1 text-gray-400",children:p==null?void 0:p.blockNumber})]}),(0,e.jsxs)("div",{className:"flex flex-row  mt-2",children:[(0,e.jsx)("div",{className:"flex-1",children:"blockTimestamp"}),(0,e.jsx)("div",{className:"flex-1 text-gray-400",children:p==null?void 0:p.blockTimestamp})]}),(0,e.jsxs)("div",{className:"flex flex-row  mt-2",children:[(0,e.jsx)("div",{className:"flex-1",children:"\u4F59\u989D"}),(0,e.jsx)("div",{className:"flex-1 text-gray-400",children:B.utils.fromWei(p.balance)})]})]})}):(0,e.jsx)("div",{children:(0,e.jsx)(D.ZP,{type:"primary",onClick:T()(o()().mark(function l(){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.ethereum.enable();case 2:t();case 3:case"end":return i.stop()}},l)})),children:"\u767B\u5F55"})})}var k=y(23353),V=y(22764),X=j.instance(),M=j.getContractLesson6ERC20();function J(b){var c=(0,E.useState)(),r=F()(c,2),u=r[0],m=r[1],h=(0,E.useState)("0x5Ee9F4Fe59aDd6b33bbe41fDaa26BC43af51681c"),g=F()(h,2),n=g[0],p=g[1],f=function(){var t=T()(o()().mark(function l(){var a,i;return o()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,M.methods.symbol().call();case 2:return a=w.sent,w.next=5,M.methods.totalSupply().call();case 5:i=w.sent,m({tokenSymbol:a,totalSupply:i});case 7:case"end":return w.stop()}},l)}));return function(){return t.apply(this,arguments)}}();return(0,E.useEffect)(function(){f();var t=setInterval(f,3e3);return function(){clearInterval(t)}},[]),(0,e.jsx)(N.Z,{title:"\u4F5C\u4E1A3\uFF1A\u524D\u7AEF\u53EF\u8BFB\u53D6\u5F53\u524D\u5408\u7EA6\u7684\u6700\u65B0\u72B6\u6001\uFF08totalSupply\uFF09\uFF0C\u53EF\u8BFB\u53D6\u8F93\u5165\u7684\u8D26\u6237\u5730\u5740\u5F53\u524D\u4F59\u989D\u3002",className:"mt-3",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{className:"flex flex-row  mt-2",children:[(0,e.jsx)("div",{className:"flex-1",children:"\u5355\u4F4D"}),(0,e.jsx)("div",{className:"flex-1 text-gray-400",children:u==null?void 0:u.tokenSymbol})]}),(0,e.jsxs)("div",{className:"flex flex-row  mt-2",children:[(0,e.jsx)("div",{className:"flex-1",children:"\u603B\u4F9B\u5E94"}),(0,e.jsx)("div",{className:"flex-1 text-gray-400",children:u==null?void 0:u.totalSupply})]}),(0,e.jsxs)(k.Z.Compact,{style:{width:"100%"},children:[(0,e.jsx)(V.Z,{value:n,onChange:function(l){p(l.target.value)}}),(0,e.jsx)(D.ZP,{type:"primary",onClick:T()(o()().mark(function t(){var l;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,M.methods.balanceOf(n).call();case 2:l=i.sent,console.log("\u4F59\u989D\uFF1A",l),alert("\u4F59\u989D\uFF1A"+JSON.stringify(l,null,2));case 5:case"end":return i.stop()}},t)})),children:"\u67E5\u8BE2"})]})]})})}var Y=j.instance(),q=j.getContractLesson6ERC20();function U(b){return(0,e.jsx)(N.Z,{title:"\u4F5C\u4E1A1: \u63D0\u4EA4js\u4EA4\u4E92\u7684\u4EE3\u7801\u3002\u90E8\u7F72\u5E26\u6709\u589E\u53D1\u4E0E\u9500\u6BC1\u529F\u80FD\u7684erc20\u5408\u7EA6\u81F3\u6D4B\u8BD5\u7F51",className:"mt-3",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{children:["\u5408\u7EA6\uFF1A",(0,e.jsx)("a",{href:"https://mumbai.polygonscan.com/address/0x86dd4c46766228ba10c6d98ab3649e9772e07d35#code",target:"_blank",children:"0x86dd4c46766228ba10c6d98ab3649e9772e07d35"})]}),(0,e.jsxs)("div",{children:["\u4EE3\u7801\uFF1A",(0,e.jsx)("a",{href:"https://github.com/gaollg/tintin-lesson-6/blob/main/src/helper/Web3Heper.ts#L10",target:"_blank",children:"https://github.com/gaollg/tintin-lesson-6/blob/main/src/helper/Web3Heper.ts#L10"})]})]})})}var I=y(35122),_=j.instance(),ee=j.getContractLesson6ERC20();function Q(b){var c=(0,E.useState)(200),r=F()(c,2),u=r[0],m=r[1],h=(0,E.useState)(100),g=F()(h,2),n=g[0],p=g[1];return(0,e.jsx)(N.Z,{title:"\u4F5C\u4E1A2\uFF1A\u5F00\u53D1\u524D\u7AEF\u754C\u9762\uFF0C\u5408\u7EA6owner\u53EF\u4EE5\u5728\u524D\u7AEF\u5B9E\u73B0\u589E\u53D1\u4E0E\u9500\u6BC1\u529F\u80FD\u3002",className:"mt-3",children:(0,e.jsxs)("div",{className:"flex flex-row gap-2 mt-2",children:[(0,e.jsxs)(k.Z.Compact,{style:{width:"100%"},children:[(0,e.jsx)(I.Z,{type:"number",value:u,onChange:function(t){t&&m(t)}}),(0,e.jsxs)(D.ZP,{type:"primary",onClick:T()(o()().mark(function f(){var t;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j.mint(u+"");case 2:t=a.sent,console.log("\u589E\u53D1\u7ED3\u679C\uFF1A",t),alert("\u589E\u53D1\u7ED3\u679C\uFF1A"+JSON.stringify(t,null,2));case 5:case"end":return a.stop()}},f)})),children:["\u589E\u53D1 ",u]})]}),(0,e.jsxs)(k.Z.Compact,{style:{width:"100%"},children:[(0,e.jsx)(I.Z,{type:"number",value:n,onChange:function(t){t&&p(t)}}),(0,e.jsxs)(D.ZP,{type:"primary",danger:!0,onClick:T()(o()().mark(function f(){var t;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j.burn(n+"");case 2:t=a.sent,console.log("\u9500\u6BC1\u7ED3\u679C\uFF1A",t),alert("\u9500\u6BC1\u7ED3\u679C\uFF1A"+JSON.stringify(t,null,2));case 5:case"end":return a.stop()}},f)})),children:["\u9500\u6BC1",n]})]})]})})}function z(){var b=(0,E.useState)(!1),c=F()(b,2),r=c[0],u=c[1];return window.ethereum?(0,e.jsxs)("div",{children:[(0,e.jsx)($,{onLogin:function(){u(!0),console.log("xxxxxxxxxxx")}}),function(){return r?(0,e.jsxs)("div",{children:[(0,e.jsx)(U,{}),(0,e.jsx)(Q,{}),(0,e.jsx)(J,{})]}):(0,e.jsx)("div",{})}()]}):(0,e.jsx)("div",{children:"\u672A\u5B89\u88C5\u94B1\u5305, \u8BF7\u5B89\u88C5\u94B1\u5305\u540E\u91CD\u8BD5"})}}}]);
